{% extends 'allrestaurants/base.html' %} {% block title %}Applications{% endblock %} {% block link %} {% endblock %} {% block content %}
<style type="text/css">
.jumbotron {
    background-color: white;
}

.errormessage p {
    color: red;
    font-size: 18px;
    text-align: center;
}
.checkbox1{
    margin-top: 5px;
}
p {
    margin: 10px 0px !important;
}
</style>
<div class="container">
    <div class="jumbotron">
        {% if request.session.createaccountfailed %}
        <div class="errormessage">
            <p class="pull-center">
                {{request.session.message}}
            </p>
        </div>
        {% endif %}
         <!-- {{restaurants}} {{userdetails}} -->
        {{roles}}
        <h2>{% if not userdetails %} Create {% else %} Edit {% endif %} Account</h2>
        <form id="create_account" class="form-horizontal" {% if not userdetails %} action="{% url 'allrestaurants:create_account' %}" {% else %} action="{% url 'allrestaurants:edit_account' pk=userdetails.loginid %}" {% endif %} method="post" autocomplete="off">
            {% csrf_token %}
            <div class="form-group">
                <label class="control-label col-sm-2" for="fname">First Name:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="fname" placeholder="Enter first name" name="fname" value="{{ userdetails.first_name }}" required>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="lname">Last Name:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="lname" placeholder="Enter last name" name="lname" value="{{ userdetails.last_name }}" required>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="email">Email:</label>
                <div class="col-sm-10">
                    <input type="email" class="form-control" id="email" placeholder="Enter email" name="email" value="{{ userdetails.email }}" required>
                </div>
            </div>
            {% if not userdetails %}
            <div class="form-group">
                <label class="control-label col-sm-2" for="username">Username:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="username" placeholder="Enter username" name="username" required>
                </div>
            </div>
            {% endif %}
            <div class="form-group">
                <label class="control-label col-sm-2" for="password">Password:</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="password" placeholder="Enter pasword" name="password" required>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="cpassword">Confirm Password:</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="confirmpassword" placeholder="Re-enter password" name="confirmpassword" required>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="mobile">Mobile:</label>
                <div class="col-sm-10">
                    <input type="number" class="form-control" id="mobile" placeholder="Enter mobile number" name="mobile" value="{{ userdetails.mobile }}" required>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="restaurant">Restaurant:</label>
                <div class="col-sm-10">
                    <input type="hidden" name="restaurantslug">
                    <input list="restaurant" name="restaurant" class="form-control" placeholder="Enter mobile number" value="{{ userdetails.restaurant|upper }}" required>
                    <datalist id="restaurant">
                        {% for element in restaurants %}
                        <option id="{{element.slug}}" value="{{element.name_of_restaurant|upper}}">
                            {% endfor %}
                    </datalist>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2">Role:</label>
                <div class="col-sm-10">
                    {% for role in roles %}
                    <label class="radio-inline">
                        <input type="radio" name="role" value="{{role.0}}" required>{{role.0|title}}
                    </label>
                    {% endfor %}
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="gender">Gender:</label>
                <div class="col-sm-10">
                    <label class="radio-inline">
                        <input type="radio" name="gender" value="male" {% if userdetails.gender == 'male' %} checked {% endif %} required>Male
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="gender" value="female" {% if userdetails.gender == 'female' %} checked {% endif %} required>Female
                    </label>
                </div>
            </div>
            {% if userdetails %}
            <div class="form-group align-middle">
                <label class="control-label col-sm-2" for="deactive">Deactive:</label>
                <div class="col-sm-10 checkbox1" >
                    <input type="checkbox" name="deactive" {% if not userdetails.active %} checked {% endif %}>
                </div>
            </div>
            {% endif %}
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %} {% block script %}
<script>
$(function() {
    // console.log('hi');
    var opt = $('option[value="' + $("input[name='restaurant']").val() + '"]');
    $("input[name='restaurantslug']").val(opt.attr('id'))
});

$("input[name='restaurant']").on('input', function() {
    // console.log('hi');
    var opt = $('option[value="' + $(this).val() + '"]');
    $("input[name='restaurantslug']").val(opt.attr('id'))
});
</script>
{% endblock %}